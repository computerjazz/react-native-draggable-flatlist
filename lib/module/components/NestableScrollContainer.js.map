{"version":3,"names":["React","ScrollView","Animated","useAnimatedScrollHandler","NestableScrollContainerProvider","useSafeNestableScrollContainerContext","useStableCallback","useKeyboardListener","AnimatedScrollView","createAnimatedComponent","NestableScrollContainerInner","props","outerScrollOffset","containerSize","scrollViewSize","scrollableRef","outerScrollEnabled","onScroll","contentOffset","value","y","onLayout","event","nativeEvent","layout","height","onContentSizeChange","w","h","NestableScrollContainer","forwardRef","forwardedRef","undefined"],"sources":["NestableScrollContainer.tsx"],"sourcesContent":["import React from \"react\";\nimport { LayoutChangeEvent, ScrollViewProps } from \"react-native\";\nimport { ScrollView } from \"react-native-gesture-handler\";\nimport Animated, { useAnimatedScrollHandler } from \"react-native-reanimated\";\nimport {\n  NestableScrollContainerProvider,\n  useSafeNestableScrollContainerContext,\n} from \"../context/nestableScrollContainerContext\";\nimport { useStableCallback } from \"../hooks/useStableCallback\";\nimport useKeyboardListener from \"../hooks/useKeyboardListener\";\n\nconst AnimatedScrollView = Animated.createAnimatedComponent(ScrollView);\n\nfunction NestableScrollContainerInner(props: ScrollViewProps) {\n  const {\n    outerScrollOffset,\n    containerSize,\n    scrollViewSize,\n    scrollableRef,\n    outerScrollEnabled,\n  } = useSafeNestableScrollContainerContext();\n\n  useKeyboardListener();\n\n  const onScroll = useAnimatedScrollHandler({\n    onScroll: ({ contentOffset }) => {\n      outerScrollOffset.value = contentOffset.y;\n    },\n  });\n\n  const onLayout = useStableCallback((event: LayoutChangeEvent) => {\n    const {\n      nativeEvent: { layout },\n    } = event;\n    containerSize.value = layout.height;\n  });\n\n  const onContentSizeChange = useStableCallback((w: number, h: number) => {\n    scrollViewSize.value = h;\n    props.onContentSizeChange?.(w, h);\n  });\n\n  return (\n    <AnimatedScrollView\n      {...props}\n      onLayout={onLayout}\n      onContentSizeChange={onContentSizeChange}\n      scrollEnabled={outerScrollEnabled}\n      ref={scrollableRef}\n      scrollEventThrottle={1}\n      onScroll={onScroll}\n    />\n  );\n}\n\nexport const NestableScrollContainer = React.forwardRef(\n  (props: ScrollViewProps, forwardedRef?: React.ForwardedRef<ScrollView>) => {\n    return (\n      <NestableScrollContainerProvider\n        forwardedRef={\n          (forwardedRef as React.MutableRefObject<ScrollView>) || undefined\n        }\n      >\n        <NestableScrollContainerInner {...props} />\n      </NestableScrollContainerProvider>\n    );\n  }\n);\n"],"mappings":";;AAAA,OAAOA,KAAP,MAAkB,OAAlB;AAEA,SAASC,UAAT,QAA2B,8BAA3B;AACA,OAAOC,QAAP,IAAmBC,wBAAnB,QAAmD,yBAAnD;AACA,SACEC,+BADF,EAEEC,qCAFF,QAGO,2CAHP;AAIA,SAASC,iBAAT,QAAkC,4BAAlC;AACA,OAAOC,mBAAP,MAAgC,8BAAhC;AAEA,MAAMC,kBAAkB,GAAGN,QAAQ,CAACO,uBAAT,CAAiCR,UAAjC,CAA3B;;AAEA,SAASS,4BAAT,CAAsCC,KAAtC,EAA8D;EAC5D,MAAM;IACJC,iBADI;IAEJC,aAFI;IAGJC,cAHI;IAIJC,aAJI;IAKJC;EALI,IAMFX,qCAAqC,EANzC;EAQAE,mBAAmB;EAEnB,MAAMU,QAAQ,GAAGd,wBAAwB,CAAC;IACxCc,QAAQ,EAAE,QAAuB;MAAA,IAAtB;QAAEC;MAAF,CAAsB;MAC/BN,iBAAiB,CAACO,KAAlB,GAA0BD,aAAa,CAACE,CAAxC;IACD;EAHuC,CAAD,CAAzC;EAMA,MAAMC,QAAQ,GAAGf,iBAAiB,CAAEgB,KAAD,IAA8B;IAC/D,MAAM;MACJC,WAAW,EAAE;QAAEC;MAAF;IADT,IAEFF,KAFJ;IAGAT,aAAa,CAACM,KAAd,GAAsBK,MAAM,CAACC,MAA7B;EACD,CALiC,CAAlC;EAOA,MAAMC,mBAAmB,GAAGpB,iBAAiB,CAAC,CAACqB,CAAD,EAAYC,CAAZ,KAA0B;IAAA;;IACtEd,cAAc,CAACK,KAAf,GAAuBS,CAAvB;IACA,yBAAAjB,KAAK,CAACe,mBAAN,qFAAAf,KAAK,EAAuBgB,CAAvB,EAA0BC,CAA1B,CAAL;EACD,CAH4C,CAA7C;EAKA,oBACE,oBAAC,kBAAD,eACMjB,KADN;IAEE,QAAQ,EAAEU,QAFZ;IAGE,mBAAmB,EAAEK,mBAHvB;IAIE,aAAa,EAAEV,kBAJjB;IAKE,GAAG,EAAED,aALP;IAME,mBAAmB,EAAE,CANvB;IAOE,QAAQ,EAAEE;EAPZ,GADF;AAWD;;AAED,OAAO,MAAMY,uBAAuB,gBAAG7B,KAAK,CAAC8B,UAAN,CACrC,CAACnB,KAAD,EAAyBoB,YAAzB,KAA2E;EACzE,oBACE,oBAAC,+BAAD;IACE,YAAY,EACTA,YAAD,IAAwDC;EAF5D,gBAKE,oBAAC,4BAAD,EAAkCrB,KAAlC,CALF,CADF;AASD,CAXoC,CAAhC"}